{"ast":null,"code":"import React from\"react\";import{useCart}from\"../CartContext\";import Button from\"@mui/material/Button\";import axios from\"axios\";// Import Axios\nimport\"./CartPage.css\";// Ensure this file contains styles for the cart page\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CartPage=()=>{const{cartItems,removeFromCart,getTotalPrice}=useCart();const handleCheckout=async()=>{try{// Assuming you have an API endpoint for creating orders\nconst response=await axios.post(\"http://localhost:8000/api/orders/\",{items:cartItems,total_price:getTotalPrice()});if(response.status===201){// Clear cart after successful order placement\n// You can also navigate to a confirmation page here\nconsole.log(\"Order placed successfully\");// Optionally clear cart\n// setCartItems([]);\n// Or redirect to a confirmation page\n}else{console.error(\"Failed to place order\");}}catch(error){console.error(\"An error occurred while placing the order\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u05E2\\u05D2\\u05DC\\u05D4\"}),cartItems.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D4\\u05E2\\u05D2\\u05DC\\u05D4 \\u05E8\\u05D9\\u05E7\\u05D4\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items\",children:[cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:8000${item.image_url}`,alt:item.name,className:\"cart-item-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05DE\\u05D7\\u05D9\\u05E8: \\u20AA\",item.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05DB\\u05DE\\u05D5\\u05EA: \",item.quantity]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.id),children:\"\\u05D4\\u05E1\\u05E8\"})]})]},item.id)),/*#__PURE__*/_jsx(\"div\",{className:\"cart-total\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u05E1\\u05DA \\u05D4\\u05DB\\u05DC: \\u20AA\",getTotalPrice()]})}),/*#__PURE__*/_jsx(Button,{className:\"checkout-button\",variant:\"contained\",color:\"primary\",onClick:handleCheckout,style:{backgroundColor:\"#f5b61f\",color:\"#fff\",width:\"100%\"},children:\"\\u05DC\\u05EA\\u05E9\\u05DC\\u05D5\\u05DD\"})]})]});};export default CartPage;","map":{"version":3,"names":["React","useCart","Button","axios","jsx","_jsx","jsxs","_jsxs","CartPage","cartItems","removeFromCart","getTotalPrice","handleCheckout","response","post","items","total_price","status","console","log","error","className","children","length","map","item","src","image_url","alt","name","price","quantity","onClick","id","variant","color","style","backgroundColor","width"],"sources":["C:/Users/user/Documents/אסי/תכנות/honey_business/frontend/src/pages/CartPage.js"],"sourcesContent":["import React from \"react\";\r\nimport { useCart } from \"../CartContext\";\r\nimport Button from \"@mui/material/Button\";\r\nimport axios from \"axios\"; // Import Axios\r\nimport \"./CartPage.css\"; // Ensure this file contains styles for the cart page\r\n\r\nconst CartPage = () => {\r\n  const { cartItems, removeFromCart, getTotalPrice } = useCart();\r\n\r\n  const handleCheckout = async () => {\r\n    try {\r\n      // Assuming you have an API endpoint for creating orders\r\n      const response = await axios.post(\"http://localhost:8000/api/orders/\", {\r\n        items: cartItems,\r\n        total_price: getTotalPrice(),\r\n      });\r\n\r\n      if (response.status === 201) {\r\n        // Clear cart after successful order placement\r\n        // You can also navigate to a confirmation page here\r\n        console.log(\"Order placed successfully\");\r\n        // Optionally clear cart\r\n        // setCartItems([]);\r\n        // Or redirect to a confirmation page\r\n      } else {\r\n        console.error(\"Failed to place order\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"An error occurred while placing the order\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"cart-page\">\r\n      <h1>עגלה</h1>\r\n      {cartItems.length === 0 ? (\r\n        <p>העגלה ריקה</p>\r\n      ) : (\r\n        <div className=\"cart-items\">\r\n          {cartItems.map((item) => (\r\n            <div key={item.id} className=\"cart-item\">\r\n              <img\r\n                src={`http://localhost:8000${item.image_url}`}\r\n                alt={item.name}\r\n                className=\"cart-item-image\"\r\n              />\r\n              <div className=\"cart-item-details\">\r\n                <h2>{item.name}</h2>\r\n                <p>מחיר: ₪{item.price}</p>\r\n                <p>כמות: {item.quantity}</p>\r\n                <button onClick={() => removeFromCart(item.id)}>הסר</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <div className=\"cart-total\">\r\n            <h2>סך הכל: ₪{getTotalPrice()}</h2>\r\n          </div>\r\n          <Button\r\n            className=\"checkout-button\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleCheckout}\r\n            style={{ backgroundColor: \"#f5b61f\", color: \"#fff\", width: \"100%\" }}\r\n          >\r\n            לתשלום\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,gBAAgB,CACxC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAE;AAC3B,MAAO,gBAAgB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzB,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAEC,SAAS,CAAEC,cAAc,CAAEC,aAAc,CAAC,CAAGV,OAAO,CAAC,CAAC,CAE9D,KAAM,CAAAW,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAV,KAAK,CAACW,IAAI,CAAC,mCAAmC,CAAE,CACrEC,KAAK,CAAEN,SAAS,CAChBO,WAAW,CAAEL,aAAa,CAAC,CAC7B,CAAC,CAAC,CAEF,GAAIE,QAAQ,CAACI,MAAM,GAAK,GAAG,CAAE,CAC3B;AACA;AACAC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CACxC;AACA;AACA;AACF,CAAC,IAAM,CACLD,OAAO,CAACE,KAAK,CAAC,uBAAuB,CAAC,CACxC,CACF,CAAE,MAAOA,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,2CAA2C,CAAEA,KAAK,CAAC,CACnE,CACF,CAAC,CAED,mBACEb,KAAA,QAAKc,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjB,IAAA,OAAAiB,QAAA,CAAI,0BAAI,CAAI,CAAC,CACZb,SAAS,CAACc,MAAM,GAAK,CAAC,cACrBlB,IAAA,MAAAiB,QAAA,CAAG,yDAAU,CAAG,CAAC,cAEjBf,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,EACxBb,SAAS,CAACe,GAAG,CAAEC,IAAI,eAClBlB,KAAA,QAAmBc,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtCjB,IAAA,QACEqB,GAAG,CAAE,wBAAwBD,IAAI,CAACE,SAAS,EAAG,CAC9CC,GAAG,CAAEH,IAAI,CAACI,IAAK,CACfR,SAAS,CAAC,iBAAiB,CAC5B,CAAC,cACFd,KAAA,QAAKc,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCjB,IAAA,OAAAiB,QAAA,CAAKG,IAAI,CAACI,IAAI,CAAK,CAAC,cACpBtB,KAAA,MAAAe,QAAA,EAAG,kCAAO,CAACG,IAAI,CAACK,KAAK,EAAI,CAAC,cAC1BvB,KAAA,MAAAe,QAAA,EAAG,4BAAM,CAACG,IAAI,CAACM,QAAQ,EAAI,CAAC,cAC5B1B,IAAA,WAAQ2B,OAAO,CAAEA,CAAA,GAAMtB,cAAc,CAACe,IAAI,CAACQ,EAAE,CAAE,CAAAX,QAAA,CAAC,oBAAG,CAAQ,CAAC,EACzD,CAAC,GAXEG,IAAI,CAACQ,EAYV,CACN,CAAC,cACF5B,IAAA,QAAKgB,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBf,KAAA,OAAAe,QAAA,EAAI,yCAAS,CAACX,aAAa,CAAC,CAAC,EAAK,CAAC,CAChC,CAAC,cACNN,IAAA,CAACH,MAAM,EACLmB,SAAS,CAAC,iBAAiB,CAC3Ba,OAAO,CAAC,WAAW,CACnBC,KAAK,CAAC,SAAS,CACfH,OAAO,CAAEpB,cAAe,CACxBwB,KAAK,CAAE,CAAEC,eAAe,CAAE,SAAS,CAAEF,KAAK,CAAE,MAAM,CAAEG,KAAK,CAAE,MAAO,CAAE,CAAAhB,QAAA,CACrE,sCAED,CAAQ,CAAC,EACN,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAd,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}